[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/npr99/intersect-community-data/HEAD)


![IN-CORE HRRC Banner](https://github.com/npr99/intersect-community-data/blob/main/IN-CORE_HRRC_CodebookBanner.png?raw=true)


# Source files to reference for automation:

Rosenheim, Nathanael (2021) “Detailed Household and Housing Unit Characteristics: Data and Replication Code.” DesignSafe-CI. https://doi.org/10.17603/ds2-jwf6-s535.

## Important Acronyms
- acg = api.census.gov - primary data source
- HRRC = Hazard Reduction and Recovery Center
- hui = housing unit inventory
- ICD = Intersect Community Data
- IN-CORE = Interdependent Networked Community Resilience Modeling Environment

## Census Data Terms of Use
This product uses the Census Bureau Data API but is not endorsed or certified by the Census Bureau. https://www.census.gov/data/developers/about/terms-of-service.html

"Users will not use these data, alone or in combination with any other Census or non-Census data, to:
1. identify any individual person, household, business or other entity
2. not link or combine these data with information in any other Census or non-Census dataset in a manner that identifies an individual person, household, business or other entity
3. not publish information from these data files, particularly in combination with any other Census or non-Census data, in a manner that identifies any individual person, household, business or other entity; and
4. not use the identity of any person or establishment discovered inadvertently and advise the Director of the Census Bureau of any such discovery by calling the U.S. Census Bureau’s Policy Coordination Office at 301-763-6440."

## Setup Environment 
see `environment.yml` file for dependencies

## File Naming Convention
The housing unit inventory file names include the following convention:
- Acronym   = hui - for housing unit inventory
- version   = v2-0-0 - version of the file
- community = community name - name of the community ex. Lumberton, NC
- year      = year of the data - ex. 2010
- random seed = random seed used to generate the data - ex. rs1000

Example description of the file name `hui_v2-0-0_Lumberton_NC_2010_rs1000.csv`:
- Version 2 Housing Unit Inventory for Lumberton, NC, using 2010 Census data. Set the random seed to 1000 to replicate the data. 

Each data file is a comma separated value (CSV) file and  
each data file has a PDF file associated with it. The PDF file is the Codebook for the data file.
The Codebook includes an overview of the project, details and notes on each variable, 
links to verify the data, and figures for exploring the data. **NOTE** - To understand the data please refer to the Codebook.

## Directory Design
The directory structure is as follows:

```
├───Data_Workflow [deleted folder]
├───Data_Workflow_LogFiles
└───ReplicationCode
    └───pyhui
        ├───SourceData
        │   ├───api_census_gov
```

The Replication Code directory contains the source code to replicate the data.
In the Replication Code Folder the notebook file `ICD_06dv1_run_HUI_v2_workflow.ipynb` is the notebook file that contains the workflow for the data replication.

The Replication Code creates the folder `Data_Workflow` to store the data files and log files. This folder is not included in the GitHub repository or the DesignSafe-CI archive.
The folder `Data_Workflow` was removed to limit the size of the DesignSafe-CI archive. The file `directory_file_tree_2021-04-01.txt` contains an archive of all files generated by the Replication Code.

Within the Replication Code Folder the folder `pyhui` contains the source code to replicate the data - this source code archives the version of the code at the time the data was generated. A current version of the source code is available on GitHub at https://github.com/npr99.

Within the `pyhui` folder the folder `SourceData` contains the code to obtain, clean, and process the source data. For the Housing Unit Inventory the source data is obtained from the Census Bureau API (apo.census.gov). The folder name `api_census_gov` reflects the url where the source data can be found - note that underscores (`_`) are used in place of `.` to allow for the folder to be used as part of the python package.

The folder `Data_Workflow_LogFiles` contains the log files generated by the Replication Code. This folder was created manually to archive the details stored in the log files. The log files include all of the weblinks, and steps in the workflow.
